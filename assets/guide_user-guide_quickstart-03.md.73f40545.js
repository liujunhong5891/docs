import{_ as e,o as a,c as l,a as r}from"./app.e8b008f9.js";const t=JSON.parse('{"title":"安装部署","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"环境准备","slug":"环境准备","link":"#环境准备","children":[]},{"level":2,"title":"安装步骤","slug":"安装步骤","link":"#安装步骤","children":[]},{"level":2,"title":"查看组件信息","slug":"查看组件信息","link":"#查看组件信息","children":[]},{"level":2,"title":"销毁步骤","slug":"销毁步骤","link":"#销毁步骤","children":[]}],"relativePath":"guide/user-guide/quickstart-03.md"}'),i={name:"guide/user-guide/quickstart-03.md"},s=[r('<h1 id="安装部署" tabindex="-1">安装部署 <a class="header-anchor" href="#安装部署" aria-hidden="true">#</a></h1><p>本文档描述如何安装部署，支持基于公有云、物理机、Kubernets 集群进行部署。 下文主要描述如何基于公有云部署。</p><h2 id="环境准备" tabindex="-1">环境准备 <a class="header-anchor" href="#环境准备" aria-hidden="true">#</a></h2><ol><li>一台 CPU 为 AMD64、操作系统为 Linux 的服务器，已安装 Docker、Git、Bash 等工具，并且 /opt/nautes 目录没有被使用。</li><li>一个阿里云的管理员访问密钥。详情参考 <a href="https://help.aliyun.com/document_detail/116401.html" target="_blank" rel="noreferrer">创建 AccessKey</a>。</li><li>受限于阿里云的账号管理规则，账号余额至少大于 100 元，否则阿里云的机器无法下发部署。</li></ol><h2 id="安装步骤" tabindex="-1">安装步骤 <a class="header-anchor" href="#安装步骤" aria-hidden="true">#</a></h2><ol><li>通过 Git CLI 克隆 <a href="https://gitlab.bluzin.io/nautes-labs/installer" target="_blank" rel="noreferrer">installer</a> 代码库到本地。</li><li>进入到根目录，修改 vars.yaml 文件，其中 access_key、secret_key、oauth_secret_key 是必填项。</li><li>执行 <a href="http://start.sh" target="_blank" rel="noreferrer">start.sh</a> 脚本开始安装。 安装部署成功后，将在 /opt/nautes 目录下将生成安装成功的组件信息。详情参考 <a href="#%E6%9F%A5%E7%9C%8B%E7%BB%84%E4%BB%B6%E4%BF%A1%E6%81%AF">查看组件信息</a> 。</li></ol><h2 id="查看组件信息" tabindex="-1">查看组件信息 <a class="header-anchor" href="#查看组件信息" aria-hidden="true">#</a></h2><p>在 /opt/nautes 目录下存储了已安装组件的相关信息，包含多个子目录，详情如下：</p><ul><li>argocd：ArgoCD 的 admin 密码。</li><li>gitlab：root 密码，租户配置库的 deploykey 私钥。</li><li>hosts：服务器的访问 IP 和访问密钥。</li><li>k8s：租户管理集群的 kubeconfig 文件。</li><li>pki：相关组件需要使用的证书和签发证书的 CA。</li><li>vault：Vault 的 unseal key、root token。</li><li>service：组件的访问地址。包括：租户管理集群、ArgoCD、Vault、GitLab、Nautes API Server 的访问地址。</li></ul><h2 id="销毁步骤" tabindex="-1">销毁步骤 <a class="header-anchor" href="#销毁步骤" aria-hidden="true">#</a></h2><p>前提：安装部署成功后，已存在 /opt/nautes 目录、nautes-installer 容器。</p><ol><li>通过 Git CLI 克隆 <a href="https://gitlab.bluzin.io/nautes-labs/installer" target="_blank" rel="noreferrer">installer</a> 代码库到本地。</li><li>进入到根目录，修改 vars.yaml 文件，其中 access_key、secret_key、oauth_secret_key 是必填项。</li><li>执行 <a href="http://destroy.sh" target="_blank" rel="noreferrer">destroy.sh</a> 脚本开始销毁。 销毁成功后，将销毁整台服务器，不支持通过脚本单独卸载特定组件。</li></ol>',12)];const n=e(i,[["render",function(e,r,t,i,n,h){return a(),l("div",null,s)}]]);export{t as __pageData,n as default};
