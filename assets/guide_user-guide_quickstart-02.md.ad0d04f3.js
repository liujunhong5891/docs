import{_ as a,c as e,o as s,d as l}from"./app.844d8816.js";const r=JSON.parse('{"title":"销毁运行时环境","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"前提条件","slug":"前提条件","link":"#前提条件","children":[]},{"level":2,"title":"删除产品配置清单","slug":"删除产品配置清单","link":"#删除产品配置清单","children":[]},{"level":2,"title":"销毁基于物理集群的运行时集群","slug":"销毁基于物理集群的运行时集群","link":"#销毁基于物理集群的运行时集群","children":[]},{"level":2,"title":"销毁基于虚拟集群的运行时集群","slug":"销毁基于虚拟集群的运行时集群","link":"#销毁基于虚拟集群的运行时集群","children":[]},{"level":2,"title":"销毁环境","slug":"销毁环境","link":"#销毁环境","children":[]}],"relativePath":"guide/user-guide/quickstart-02.md"}'),n={name:"guide/user-guide/quickstart-02.md"},t=[l('<h1 id="销毁运行时环境" tabindex="-1">销毁运行时环境 <a class="header-anchor" href="#销毁运行时环境" aria-hidden="true">#</a></h1><p>本文档将描述销毁部署运行时环境、以及销毁管理服务器的执行过程。包括以下步骤：</p><p><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6">前提条件</a><br><a href="#%E5%88%A0%E9%99%A4%E4%BA%A7%E5%93%81%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95">删除产品配置清单</a><br><a href="#%E9%94%80%E6%AF%81%E5%9F%BA%E4%BA%8E%E7%89%A9%E7%90%86%E9%9B%86%E7%BE%A4%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E9%9B%86%E7%BE%A4">销毁基于物理集群的运行时集群</a><br><a href="#%E9%94%80%E6%AF%81%E5%9F%BA%E4%BA%8E%E8%99%9A%E6%8B%9F%E9%9B%86%E7%BE%A4%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E9%9B%86%E7%BE%A4">销毁基于虚拟集群的运行时集群</a><br><a href="#%E9%94%80%E6%AF%81%E7%8E%AF%E5%A2%83">销毁环境</a></p><h2 id="前提条件" tabindex="-1">前提条件 <a class="header-anchor" href="#前提条件" aria-hidden="true">#</a></h2><p>已成功安装产品的部署运行时环境，并且在该部署运行时环境中成功部署产品。</p><h2 id="删除产品配置清单" tabindex="-1">删除产品配置清单 <a class="header-anchor" href="#删除产品配置清单" aria-hidden="true">#</a></h2><p>支持通过 Nautes CLI 删除产品配置清单，包括部署运行时、代码库、项目、环境、产品。</p><ol><li>克隆 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">产品配置库模板</a> 的代码库到本地，批量替换产品配置库模板中的变量 suffix，并更新 Environment 资源的 cluster 的属性值为部署运行时集群的名称。</li><li>下载 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">命令行工具</a>，执行以下命令。其中，“examples/demo.yaml” 指存储产品配置库模板的代码库的相对路径，gitlab-access-token 是您的 GitLab 访问令牌，api-server-address 是 <a href="./quickstart-03.html#查看组件信息">Nautes API Server 的访问地址</a>。执行成功后，将删除产品配置清单，并在指定集群上销毁产品的部署运行时环境。</li></ol><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><h2 id="销毁基于物理集群的运行时集群" tabindex="-1">销毁基于物理集群的运行时集群 <a class="header-anchor" href="#销毁基于物理集群的运行时集群" aria-hidden="true">#</a></h2><p>销毁集群之前请先销毁产品配置清单，详情参考 <a href="#%E5%88%A0%E9%99%A4%E4%BA%A7%E5%93%81%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95">删除产品配置清单</a>。 先克隆 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">注册集群模板</a> 代码库到本地，并替换“examples/demo-cluster-physical-worker.yaml”模板文件的相关变量。然后下载 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">命令行工具</a>，并执行以下命令。命令执行成功后，将会销毁物理集群。</p><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#676E95;"># examples/demo-cluster-host.yaml 是在模板代码库中模板文件的相对路径</span></span>\n<span class="line"><span style="color:#676E95;"># gitlab-access-token 是 GitLab 访问令牌</span></span>\n<span class="line"><span style="color:#676E95;"># api-server-address 是 API Server 的访问地址</span></span>\n<span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-cluster-physical-worker.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><h2 id="销毁基于虚拟集群的运行时集群" tabindex="-1">销毁基于虚拟集群的运行时集群 <a class="header-anchor" href="#销毁基于虚拟集群的运行时集群" aria-hidden="true">#</a></h2><p>销毁集群之前请先销毁产品配置清单，详情参考 <a href="#%E5%88%A0%E9%99%A4%E4%BA%A7%E5%93%81%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95">删除产品配置清单</a>。</p><ol><li>通过命令行销毁虚拟集群。步骤与 <a href="#%E9%94%80%E6%AF%81%E5%9F%BA%E4%BA%8E%E7%89%A9%E7%90%86%E9%9B%86%E7%BE%A4%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E9%9B%86%E7%BE%A4">销毁基于物理集群的运行时集群</a> 类似，使用 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">注册集群模板</a> 代码库中“examples/demo-cluster-virtual-worker.yaml”模板文件。</li></ol><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-cluster-virtual-worker.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><ol start="2"><li>通过命令行销毁虚拟集群所属的宿主集群，步骤与 <a href="#%E9%94%80%E6%AF%81%E5%9F%BA%E4%BA%8E%E7%89%A9%E7%90%86%E9%9B%86%E7%BE%A4%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E9%9B%86%E7%BE%A4">销毁基于物理集群的运行时集群</a> 类似，使用 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">注册集群模板</a> 代码库中“examples/demo-cluster-host.yaml”模板文件。</li></ol><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-cluster-host.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><p>命令执行成功后，将会销毁虚拟集群及其宿主集群。</p><h2 id="销毁环境" tabindex="-1">销毁环境 <a class="header-anchor" href="#销毁环境" aria-hidden="true">#</a></h2><p>详情参考 <a href="./quickstart-03.html#销毁环境">安装部署</a>。</p>',21)];const p=a(n,[["render",function(a,l,r,n,p,i){return s(),e("div",null,t)}]]);export{r as __pageData,p as default};
