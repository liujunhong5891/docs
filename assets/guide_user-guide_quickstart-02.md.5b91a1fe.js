import{_ as a,c as e,o as s,d as l}from"./app.844d8816.js";const n=JSON.parse('{"title":"清理环境","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"前提条件","slug":"前提条件","link":"#前提条件","children":[]},{"level":2,"title":"销毁部署应用的运行环境","slug":"销毁部署应用的运行环境","link":"#销毁部署应用的运行环境","children":[]},{"level":2,"title":"销毁部署应用的物理集群","slug":"销毁部署应用的物理集群","link":"#销毁部署应用的物理集群","children":[]},{"level":2,"title":"销毁部署应用的虚拟集群","slug":"销毁部署应用的虚拟集群","link":"#销毁部署应用的虚拟集群","children":[]},{"level":2,"title":"销毁环境","slug":"销毁环境","link":"#销毁环境","children":[]}],"relativePath":"guide/user-guide/quickstart-02.md"}'),r={name:"guide/user-guide/quickstart-02.md"},t=[l('<h1 id="清理环境" tabindex="-1">清理环境 <a class="header-anchor" href="#清理环境" aria-hidden="true">#</a></h1><p>本文档将描述清理 IT 系统部署运行环境的执行过程。包括以下步骤：</p><p><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6">前提条件</a><br><a href="#%E9%94%80%E6%AF%81%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">销毁部署应用的运行环境</a><br><a href="#%E9%94%80%E6%AF%81%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%9A%84%E7%89%A9%E7%90%86%E9%9B%86%E7%BE%A4">销毁部署应用的物理集群</a><br><a href="#%E9%94%80%E6%AF%81%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%9A%84%E8%99%9A%E6%8B%9F%E9%9B%86%E7%BE%A4">销毁部署应用的虚拟集群</a><br><a href="#%E9%94%80%E6%AF%81%E7%8E%AF%E5%A2%83">销毁环境</a></p><blockquote><p>根据 <a href="./quickstart-01.html">部署第一个应用</a> 过程中注册的集群类型，决定是否执行“销毁部署应用的物理集群、销毁部署应用的虚拟集群”步骤以销毁集群。</p></blockquote><h2 id="前提条件" tabindex="-1">前提条件 <a class="header-anchor" href="#前提条件" aria-hidden="true">#</a></h2><p>在指定集群中成功安装 IT 系统的部署运行时环境，并且在运行时环境中成功部署应用。</p><h2 id="销毁部署应用的运行环境" tabindex="-1">销毁部署应用的运行环境 <a class="header-anchor" href="#销毁部署应用的运行环境" aria-hidden="true">#</a></h2><p>下文将描述通过命令行销毁 IT 系统运行环境的 Kubernetes 资源文件。</p><p>先克隆 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">配置模板库</a> 的代码库到本地，批量替换“examples/demo-product.yaml”中的变量 suffix，并更新 Environment 资源的 cluster 值为运行集群的名称。下载 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">命令行工具</a>，执行以下命令。命令执行成功后，将删除 GitLab 代码库中对应的 Kubernetes 资源文件，并基于这些文件在 GitLab 中删除与IT系统相关的群组和代码库、以及在指定运行集群上销毁 IT 系统的部署运行时环境。</p><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#676E95;"># “examples/demo-product.yaml” 指配置模板库中模板文件的相对路径</span></span>\n<span class="line"><span style="color:#676E95;"># gitlab-access-token 是 GitLab 访问令牌</span></span>\n<span class="line"><span style="color:#676E95;"># api-server-address 是 API Server 的访问地址</span></span>\n<span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-product.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><blockquote><p>GitLab 账号的注意事项，与 <a href="./quickstart-01.html#准备部署应用的运行环境">注册部署应用的运行环境</a> 相同。</p></blockquote><h2 id="销毁部署应用的物理集群" tabindex="-1">销毁部署应用的物理集群 <a class="header-anchor" href="#销毁部署应用的物理集群" aria-hidden="true">#</a></h2><blockquote><p>请确保已成功安装用于部署应用的物理集群。</p></blockquote><p>下文将描述如何销毁部署应用的物理集群。</p><p>先克隆 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">注册集群模板</a> 代码库到本地，并替换“examples/demo-cluster-physical-worker.yaml”模板文件的相关变量。下载 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">命令行工具</a>，并执行以下命令。命令执行成功后，将会销毁物理集群。</p><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#676E95;"># examples/demo-cluster-host.yaml 是在模板代码库中模板文件的相对路径</span></span>\n<span class="line"><span style="color:#676E95;"># gitlab-access-token 是 GitLab 访问令牌</span></span>\n<span class="line"><span style="color:#676E95;"># api-server-address 是 API Server 的访问地址</span></span>\n<span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-cluster-physical-worker.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><blockquote><p>GitLab 账号、API Server 的注意事项，与 <a href="./quickstart-01.html#注册部署应用的物理集群">注册部署应用的物理集群</a> 相同。</p></blockquote><h2 id="销毁部署应用的虚拟集群" tabindex="-1">销毁部署应用的虚拟集群 <a class="header-anchor" href="#销毁部署应用的虚拟集群" aria-hidden="true">#</a></h2><blockquote><p>请确保已成功安装用于部署应用的虚拟集群。</p></blockquote><p>下文将描述如何销毁部署应用的虚拟集群。</p><ol><li>执行命令行销毁虚拟集群。步骤与 <a href="#%E9%94%80%E6%AF%81%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%9A%84%E7%89%A9%E7%90%86%E9%9B%86%E7%BE%A4">销毁部署应用的物理集群</a> 类似，使用 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">注册集群模板</a> 代码库中“examples/demo-cluster-virtual-worker.yaml”模板文件。</li></ol><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-cluster-virtual-worker.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><ol start="2"><li>执行命令行销毁虚拟集群所属的宿主集群，步骤与 <a href="#%E9%94%80%E6%AF%81%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%9A%84%E7%89%A9%E7%90%86%E9%9B%86%E7%BE%A4">销毁部署应用的物理集群</a> 类似，使用 <a href="https://gitlab.bluzin.io/nautes-labs/cli.git" target="_blank" rel="noreferrer">注册集群模板</a> 代码库中“examples/demo-cluster-host.yaml”模板文件。</li></ol><div class="language-Shell"><button class="copy"></button><span class="lang">Shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">nautes remove -f examples/demo-cluster-host.yaml -t </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">gitlab-access-token -s </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">api-server-address</span></span>\n<span class="line"></span></code></pre></div><p>命令执行成功后，将会销毁虚拟集群及所属的宿主集群。</p><h2 id="销毁环境" tabindex="-1">销毁环境 <a class="header-anchor" href="#销毁环境" aria-hidden="true">#</a></h2><p>详情参考 <a href="./quickstart-03.html#销毁环境">安装部署</a>。</p>',27)];const p=a(r,[["render",function(a,l,n,r,p,o){return s(),e("div",null,t)}]]);export{n as __pageData,p as default};
